<div class="container">
    <h1 nz-typography>
        Report
    </h1>
    <form nz-form [formGroup]="formGroup" (ngSubmit)="onSubmit()">
        <nz-form-item nz-row nzJustify="center">
            <nz-form-label nz-col [nzSpan]="4" nzRequired>Category</nz-form-label>
            <nz-form-control nz-col [nzSpan]="16" nzHasFeedback nzValidatingTip="Validating..." [nzErrorTip]="errorTpl">
                <nz-select formControlName="category">
                    <nz-option *ngFor="let item of typeOptions" [nzValue]="item.value" [nzLabel]="item.label">
                    </nz-option>
                </nz-select>
            </nz-form-control>
        </nz-form-item>

        <nz-form-item nz-row nzJustify="center">
            <nz-form-label nz-col [nzSpan]="4" nzRequired>Location</nz-form-label>
            <nz-form-control nz-col [nzSpan]="16" nzHasFeedback nzValidatingTip="Validating..." [nzErrorTip]="errorTpl">
                <app-map-picker formControlName="location"></app-map-picker>
                <span *ngIf="locationString" nz-typography>{{ locationString }}</span>
            </nz-form-control>
        </nz-form-item>

        <nz-form-item nz-row nzJustify="center">
            <nz-form-label nz-col [nzSpan]="4" nzRequired>Description</nz-form-label>
            <nz-form-control nz-col [nzSpan]="16" nzHasFeedback nzValidatingTip="Validating..." [nzErrorTip]="errorTpl">
                <textarea rows="5" nz-input formControlName="description"></textarea>
            </nz-form-control>
        </nz-form-item>

        <nz-form-item nz-row nzJustify="center">
            <nz-form-label nz-col [nzSpan]="4" nzRequired>Images</nz-form-label>
            <nz-form-control nz-col [nzSpan]="16" nzHasFeedback nzValidatingTip="Validating..." [nzErrorTip]="errorTpl">
                <nz-upload nzListType="picture-card" [(nzFileList)]="uploadedFiles" [nzMultiple]="true" [nzSize]="5120"
                    nzAccept="image/*" (nzChange)="onFilesChange($event)"
                    [nzShowUploadList]="{ showPreviewIcon: false, showRemoveIcon: true, showDownloadIcon: false }"
                    [nzShowButton]="uploadedFiles.length < 8" nzAction="/upload">
                    <div>
                        <i nz-icon nzType="plus"></i>
                        <div style="margin-top: 8px">Upload</div>
                    </div>
                </nz-upload>
            </nz-form-control>
        </nz-form-item>

        <ng-template #errorTpl let-control>
            <ng-container *ngIf="control.hasError('required')">
                This field is required
            </ng-container>
        </ng-template>

        <button id="submit-button" type="submit" nz-button nzType="primary" (click)="onSubmit()">
            Submit
        </button>
    </form>
</div>